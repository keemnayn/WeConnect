<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper
	namespace="com.arezip.weconnect.mapper.admin.AdminProposalMapper">
	<!-- 건의사항 전체 목록 -->
	<select id="selectAllProposals"
		resultType="com.arezip.weconnect.model.dto.ProposalDTO">
		select p.proposal_id AS proposalId, p.proposal_title AS
		proposalTitle,
		p.proposal_content
		AS proposalContent,
		to_char(p.proposal_create,'YYYY-MM-DD') AS proposalCreate,
		p.proposal_status
		AS proposalStatus, m.member_name AS
		memberName from
		proposal p join
		member
		m on m.member_id=p.member_id
		ORDER BY proposal_id
		DESC
	</select>
	<!-- 건의사항 처리 상태 변경-->
	<update id="updateProposalStatus" parameterType="com.arezip.weconnect.model.dto.ProposalDTO">
	UPDATE proposal
	SET proposal_status = #{proposalStatus}
	WHERE proposal_id = #{proposalId}
	</update>
	<!-- 건의사항 삭제 -->
	<delete id="deleteProposal" parameterType="com.arezip.weconnect.model.dto.ProposalDTO">
	delete proposal where proposal_id=#{proposalId}
	</delete>
</mapper>